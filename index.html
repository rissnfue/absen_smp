<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi SMP Islam Biiznillah</title>
    <link rel="icon" href="assets/WhatsApp_Image_2025-12-17_at_21.28.17_0023c951-removebg-preview.png" type="image/png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/id.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body class="text-slate-800 bg-[#1e408a]">

    <div class="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur shadow-md z-50 transition-all duration-300">
        <div class="container mx-auto max-w-6xl px-4 py-2 flex flex-col md:flex-row justify-between items-center gap-2">
            
            <div class="flex items-center gap-3 w-full md:w-auto">
                <img src="assets/WhatsApp_Image_2025-12-17_at_21.28.17_0023c951-removebg-preview.png" alt="Logo" class="w-10 h-10 object-contain">
                <div class="leading-tight mr-2">
                    <h1 class="font-bold text-gray-800 text-sm md:text-lg">SMP Islam Biiznillah</h1>
                    <p class="text-[10px] md:text-xs text-blue-600 font-bold tracking-wide">Al-Anshory Moyot</p>
                </div>

                <div class="relative group ml-2">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-blue-600">
                        <i class="fas fa-users"></i>
                    </div>
                    <select id="pilihKelas" onchange="gantiKelas()" class="bg-blue-50 border-2 border-blue-200 text-blue-800 text-sm font-bold rounded-full pl-9 pr-8 py-1.5 focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer appearance-none shadow-sm transition hover:bg-blue-100">
                        <option value="9">Kelas 9</option>
                        <option value="8">Kelas 8</option>
                        <option value="7">Kelas 7</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-blue-600">
                        <i class="fas fa-chevron-down text-xs"></i>
                    </div>
                </div>
            </div>

            <div class="flex flex-col md:flex-row items-center gap-2 w-full md:w-auto justify-end">
                <div id="clock" class="text-lg font-bold text-blue-900 font-mono hidden md:block mr-2">00:00:00</div>
                
                <div id="authContainer" class="w-full md:w-auto">
                    <button id="btnMasukWali" onclick="loginWaliKelas()" class="bg-orange-500 hover:bg-orange-600 text-white px-5 py-1.5 rounded-full text-xs font-bold shadow-md transition transform hover:scale-105 flex items-center justify-center gap-2 ml-0 md:ml-2 border-2 border-orange-400 w-full md:w-auto">
                        <i class="fas fa-lock"></i> MASUK WALI KELAS
                    </button>

                    <button id="btnKeluarWali" onclick="logoutWaliKelas()" class="hidden bg-red-600 hover:bg-red-700 text-white px-5 py-1.5 rounded-full text-xs font-bold shadow-md transition transform hover:scale-105 flex items-center justify-center gap-2 ml-0 md:ml-2 border-2 border-red-500 w-full md:w-auto">
                        <i class="fas fa-sign-out-alt"></i> KELUAR MODE WALI
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto max-w-6xl px-4 mt-32 md:mt-24 pb-20">

        <div id="syncNotif" class="hidden mb-4 bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-3 rounded shadow-md text-xs font-bold flex items-center gap-2">
            <i class="fas fa-sync fa-spin"></i>
            <span>Mengambil data absensi hari ini dari server...</span>
        </div>

        <div id="panelWaliKelas" class="hidden mb-5 bg-yellow-50 border border-yellow-200 rounded-xl p-3 flex flex-col md:flex-row justify-between items-center animate-bounce-in shadow-sm gap-3">
            <div class="flex items-center gap-3 self-start">
                <div class="bg-yellow-100 p-2 rounded-full text-yellow-600"><i class="fas fa-folder-open"></i></div>
                <div>
                    <h3 class="font-bold text-gray-800 text-sm">Mode Wali <span id="labelWaliKelas">Kelas 9</span></h3>
                    <p class="text-xs text-gray-500">Silakan download data laporan:</p>
                </div>
            </div>
            <div class="flex gap-2 w-full md:w-auto">
                <a href="https://docs.google.com/spreadsheets/d/1dJzZGCJ4wbXd544GBjc7PATynD74zxiGAz7HQDlxmwE/export?format=pdf&size=A4&portrait=true&fitw=true&gridlines=false" target="_blank" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-2 shadow"><i class="fas fa-file-pdf"></i> PDF</a>
                <a href="https://docs.google.com/spreadsheets/d/1dJzZGCJ4wbXd544GBjc7PATynD74zxiGAz7HQDlxmwE/export?format=xlsx" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-2 shadow"><i class="fas fa-file-excel"></i> Excel</a>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-xl p-5 mb-6 border-t-4 border-blue-600">
            <div class="flex items-center gap-2 mb-4 border-b pb-2">
                <i class="fas fa-chalkboard-user text-blue-600 text-lg"></i>
                <h2 class="text-gray-800 font-bold text-base">Data Pembelajaran</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 mb-1 ml-1 uppercase">Tanggal</label>
                    <div class="relative group cursor-pointer">
                        <input type="text" id="inputTanggal" class="w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-bold text-gray-700 outline-none cursor-pointer hover:bg-gray-100 transition focus:ring-1 focus:ring-blue-500 shadow-sm" placeholder="Pilih Tanggal..." readonly>
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-blue-500"><i class="far fa-calendar-alt"></i></div>
                    </div>
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 mb-1 ml-1 uppercase">Jam Pelajaran</label>
                    <div class="flex items-center bg-gray-50 rounded-lg border border-gray-200 p-1 shadow-sm h-[42px]">
                        <div class="flex-1 flex items-center justify-center gap-2 border-r border-gray-300 pr-2 cursor-pointer hover:bg-gray-100 rounded transition h-full" id="wrapperJamMulai">
                            <span class="text-[10px] text-gray-400 uppercase font-bold tracking-wider">Mulai</span>
                            <input type="text" id="jamMulai" class="bg-transparent text-sm font-bold text-blue-700 outline-none w-14 text-center cursor-pointer" placeholder="--:--" readonly>
                        </div>
                        <div class="px-2 text-gray-300"><i class="fas fa-arrow-right text-xs"></i></div>
                        <div class="flex-1 flex items-center justify-center gap-2 pl-2 cursor-pointer hover:bg-gray-100 rounded transition h-full" id="wrapperJamSelesai">
                            <span class="text-[10px] text-gray-400 uppercase font-bold tracking-wider">Selesai</span>
                            <input type="text" id="jamSelesai" class="bg-transparent text-sm font-bold text-blue-700 outline-none w-14 text-center cursor-pointer" placeholder="--:--" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="relative group">
                    <label class="block text-[10px] font-bold text-gray-400 mb-1 ml-1 uppercase">Nama Guru</label>
                    <div class="relative">
                        <select id="namaGuru" class="w-full pl-3 pr-8 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-semibold focus:ring-1 focus:ring-blue-500 outline-none appearance-none cursor-pointer hover:bg-white transition" required>
                            <option value="" disabled selected> Pilih Guru </option>
                            <option value="H.M. Azzharuddin, S.S, Gr">H.M. Azzharuddin, S.S, Gr</option>
                            <option value="H.SOPYAN AL-ANSHORY,S.Pd.">H.SOPYAN AL-ANSHORY,S.Pd.</option>
                            <option value="HIRFAN MAULANA ,S,E">HIRFAN MAULANA ,S,E</option>
                            <option value="SITI HALIMATUSSA'DIYAH, S.Pd.">SITI HALIMATUSSA'DIYAH, S.Pd.</option>
                            <option value="INDANA ZULFA AMELIA S.Pd, Gr">INDANA ZULFA AMELIA S.Pd, Gr</option>
                            <option value="DINI RISTIYANI, S.Pd">DINI RISTIYANI, S.Pd</option>
                            <option value="M.RAZAK FURQON">M.RAZAK FURQON</option>
                            <option value="IRHANDI LESMANA, S.H">IRHANDI LESMANA, S.H</option>
                            <option value="HAFIZAH,S.Pd.">HAFIZAH,S.Pd.</option>
                            <option value="Lely Hidayati,S.Pd,Gr">Lely Hidayati,S.Pd,Gr</option>
                            <option value="MUHAMMAD AKBAR, S.Ag">MUHAMMAD AKBAR, S.Ag</option>
                            <option value="ARI SETIAWAN">ARI SETIAWAN</option>
                            <option value="MUHAMMAD AMIN, S.Pd">MUHAMMAD AMIN, S.Pd</option>
                            <option value="EKA LAELA ISWARI,S.E">EKA LAELA ISWARI,S.E</option>
                            <option value="WILA MARDINI, S.Pd">WILA MARDINI, S.Pd</option>
                            <option value="PARMI MARIANTI.S,Pd">PARMI MARIANTI.S,Pd</option>
                            <option value="ROSITA YUSRIANTI, S.Pd">ROSITA YUSRIANTI, S.Pd</option>
                            <option value="AHMAD DWI ARIADI, S.Par">AHMAD DWI ARIADI, S.Par</option>
                        </select>
                        <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400 text-xs pointer-events-none"></i>
                    </div>
                </div>

                <div class="relative group">
                    <label class="block text-[10px] font-bold text-gray-400 mb-1 ml-1 uppercase">Mata Pelajaran</label>
                    <div class="relative">
                        <select id="mapel" class="w-full pl-3 pr-8 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-semibold focus:ring-1 focus:ring-blue-500 outline-none appearance-none cursor-pointer hover:bg-white transition" required>
                            <option value="" disabled selected> Pilih Mapel </option>
                            <option value="TIK (Teknologi Informasi dan Komunikasi)">TIK (Teknologi Informasi dan Komunikasi)</option>
                            <option value="Matematika">Matematika</option>
                            <option value="Bahasa Indonesia">Bahasa Indonesia</option>
                            <option value="Bahasa Inggris">Bahasa Inggris</option>
                            <option value="IPA">IPA</option>
                            <option value="IPS">IPS</option>
                            <option value="PPKN">PPKN</option>
                            <option value="Penjaskes">Penjaskes</option>
                            <option value="Seni Budaya">Seni Budaya</option>
                            <option value="PAI">PAI</option>
                            <option value="Bahasa Arab">Bahasa Arab</option>
                            <option value="Qur'an Hadits">Qur'an Hadits</option>
                            <option value="Akidah Akhlak">Akidah Akhlak</option>
                            <option value="SKI">SKI</option>
                            <option value="Nahwu Shorof">Nahwu Sharef</option>
                            <option value="Mulok/Bahasa Sasak">Mulok/Bahasa Sasak</option>
                        </select>
                        <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400 text-xs pointer-events-none"></i>
                    </div>
                </div>
            </div>

            <div class="mb-5">
                <input type="text" id="materi" class="w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg focus:border-blue-500 outline-none text-gray-700 placeholder-gray-400 transition bg-gray-50 focus:bg-white text-sm" placeholder="Ketik Materi Pembelajaran..." required>
            </div>

            <div class="flex justify-center">
                <button onclick="setAllHadir()" class="bg-[#10b981] hover:bg-emerald-600 text-white px-8 py-2.5 rounded-full font-bold shadow-lg shadow-emerald-200 transition transform hover:scale-105 flex items-center gap-2 text-sm">
                    <i class="fas fa-check-circle text-lg"></i> Tandai Hadir Semua
                </button>
            </div>
        </div>

        <div class="grid grid-cols-4 gap-3 mb-6">
            <div class="bg-[#10b981] rounded-xl p-2 text-white shadow-lg text-center transform hover:scale-105 transition"><span class="text-2xl font-bold block leading-none mt-1" id="count-hadir">0</span><span class="text-[10px] uppercase font-bold opacity-80">Hadir</span></div>
            <div class="bg-[#f59e0b] rounded-xl p-2 text-white shadow-lg text-center transform hover:scale-105 transition"><span class="text-2xl font-bold block leading-none mt-1" id="count-sakit">0</span><span class="text-[10px] uppercase font-bold opacity-80">Sakit</span></div>
            <div class="bg-[#3b82f6] rounded-xl p-2 text-white shadow-lg text-center transform hover:scale-105 transition"><span class="text-2xl font-bold block leading-none mt-1" id="count-izin">0</span><span class="text-[10px] uppercase font-bold opacity-80">Izin</span></div>
            <div class="bg-[#ef4444] rounded-xl p-2 text-white shadow-lg text-center transform hover:scale-105 transition"><span class="text-2xl font-bold block leading-none mt-1" id="count-alfa">0</span><span class="text-[10px] uppercase font-bold opacity-80">Alfa</span></div>
        </div>

        <div id="undoContainer" class="hidden mb-6 bg-white border-l-4 border-red-500 rounded p-3 flex justify-between items-center shadow animate-pulse">
            <div class="flex items-center gap-2 text-red-600"><i class="fas fa-exclamation-triangle"></i><p class="text-xs font-bold">Salah input? Klik batalkan.</p></div>
            <button onclick="batalkanInput()" class="bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 px-3 py-1 rounded text-xs font-bold transition">Batalkan</button>
        </div>

        <div id="listSiswa" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>

        <div class="mt-8 flex justify-center pb-10">
            <button onclick="kirimAbsensi()" id="btnKirim" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-3 px-12 rounded-full shadow-2xl transition transform hover:scale-105 flex items-center gap-3 text-lg border-4 border-blue-500/30">
                <span>Kirim Laporan</span> <i class="fas fa-paper-plane"></i>
            </button>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
